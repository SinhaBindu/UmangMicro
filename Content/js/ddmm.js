var ddmenuOptions={menuId:"ddmenu",linkIdToMenuHtml:null,open:"onmouseover",delay:50,speed:400,license:"2c8m19"},ddmenu=new Ddmenu(ddmenuOptions),$D1=function(){var c="",a=-1;function m(a){c="";h(a)}function h(a){var d=a.nodeName;if(d=="#text")c=c+a.nodeValue+"\n";for(var b=0,e=a.childNodes.length;b<e;b++)h(a.childNodes[b])}function o(f){var d=document.getElementById(f).value;if(window.ActiveXObject){var a=new ActiveXObject("Microsoft.XMLDOM");a.async=false;a.loadXML(d);if(a.parseError.errorCode!=0){var b="HTML markup error!\nError Code: "+a.parseError.errorCode+"\n";b=b+"Error Reason: "+a.parseError.reason;b=b+"Error Line: "+a.parseError.line;alert(b);return false}else return true}else if(document.implementation.createDocument){var e=new DOMParser,a=e.parseFromString(d,"text/xml");if(a.getElementsByTagName("parsererror").length>0){m(a.getElementsByTagName("parsererror")[0]);alert("HTML markup error!\n"+c);return false}else return true}else{alert("Your browser cannot handle HTML validation");return false}}var b=function(a,b){if(/^\d+$/.test(a))return false;else{alert(b+" must be a number");return true}},j=function(a,b){if(/^\d+$/.test(a)){alert(b+" cannot be a pure number. Good examples are: 12px, small, 110%, 1.1em");return true}else return false},q=function(a,b){if(/(?:^\d+(px|%)$)|auto/.test(a))return false;else{alert(b+" format is not correct");return true}},e=function(b){if(b!=a){a=b;skinChangeCallback(b);$.ajax({type:"GET",url:"/ddmenu/skins/"+b+"/markup.txt",dataType:"text"}).done(function(a){if(a.length>9){$("#myHtml").val(a);f()}})}},f=function(){if(o("myHtml")){$("#dm1Inner").html($("#myHtml").val());ddmenu.init();$("html, body").animate({scrollTop:0},"fast");return true}else return false},p=function(){var c=50,b=navigator.userAgent,a;if((a=b.indexOf("MSIE "))!=-1)c=parseInt(b.substring(a+5,b.indexOf(".",a)));return c},r=p()<9,k=function(){var a={};a.tW=$("#tW").val();if(q(a.tW,"main menu width"))return 0;a.tlh=$("#tlh").val();if(b(a.tlh,"main menu height"))return 0;a.caretTop=a.tlh/2-3;a.algn1=$("#algn1").val();a.algn1_1=a.algn1=="center"?"0 auto":a.algn1=="left"?"0 auto 0 0":"0 0 0 auto";a.algn2=$("#algn2").val();a.algn3=$("#algn3").val();var e=$("#tLiPad").val();if(b(e,"LI margin left/right"))return 0;a.tLiPad="margin:0 "+e+"px";a.caretLeft=e/2>4?e-4:Math.ceil(e/2);a.tfs=$("#tfs").val();if(j(a.tfs,"main menu font size"))return 0;a.tfw=$("#tfw").is(":checked")?"bold":"normal";a.tc=$("#tc").val();a.tLi2=$("#tLi2").val();a.tLi1=$("#tLi1").val();a.tbg=$("#tbg").val();a.tUl=$("#tUl").val();var f=a.tUl.toLowerCase().indexOf("rgba")!=-1;a.tbgM="";if(f){var g=/background(?:-color)?[\s:]+rgba\(.*,.*,.*,\s*(.*)\s*\).*;/i,d=a.tUl.match(g);if(d&&d.length){var c=parseFloat(d[1]);if(c<.51)c=.35+c;else if(c<.7)c=.2+c;a.tbgM=d[0].replace(d[1],c)}}a.iconBg=f?"#333":a.tbg;a.iconClr=f?"#eee":a.tc;a.sdd=$("#sdd").val();a.sbg=$("#sbg").val();a.scl0=$("#scl0").val();a.spd=$("#spd").val();if(b(a.spd,"DIV.dd-inner padding"))return 0;a.smar=$("#smar").val();if(b(a.smar,"DIV.dd-inner margin"))return 0;a.sfs0=$("#sfs0").val();if(j(a.sfs0,"sub-menu text size"))return 0;a.scl=$("#scl").val();a.sclh=$("#sclh").val();a.sclm=$("#sclm").val();a.extra=$("#extra").val();return a};function n(a){if(!r)$("#customCss").text(a);else for(i=0;i<document.styleSheets.length;i++)if(document.styleSheets[i].id=="customCss"){document.styleSheets[i].cssText=a;break}$("#cssMilo").val(a)}var l=function(a,b){var c=function(a){return b[a.replace(/@/g,"")]};$.ajax({type:"GET",url:"/ddmenu/skins/"+a+"/ddmenu.css",dataType:"text"}).done(function(b){var d=b.replace(/@(?:.+?)@/g,c);n(d);e(a)})};function d(b){var a=k();a&&l(b,a)}var g=function(b){a=-1;var c;$.getJSON("/ddmenu/skins/"+b+"/skin.json",function(a){$.each(a,function(a,b){if($("#"+a).is(":checkbox"))$("#"+a).prop("checked",b);else $("#"+a).val(b)});d(b);MC.ColorPicker.refresh()})};return{applyStyle:function(){d(a)},restoreCurrentStyle:function(){g(a)},initStyle:g,applyHtml:f,resetHtml:function(){var b=a;a=-1;e(b)},getCurrentSkin:function(){return a}}},menumaker=new $D1,myHtmlChanged=0,newSkin;$("#myHtml").bind("input",function(){myHtmlChanged=1});var as=function(a){newSkin=a;if(myHtmlChanged&&menumaker.getCurrentSkin()!=a){tooltip.pop(null,"#htmlChangedAlert",{position:4,sticky:true});return false}menumaker.initStyle(a);return false};$(document).ready(function(){$("#skinBuilderWrap").load("ddmenu/skins/skin-builder.html",function(){MC.ColorPicker.init();as(1)})});function skinChangeCallback(a){setActiveLinkColor(a);setDemoStyles(a)}function setActiveLinkColor(a){$("#templ a").each(function(b){this.className=b+1==a?"current":""})}var demowrap=$("#demowrap"),dldwrap=$("#downloadWrap");function setDemoStyles(a){switch(a){case 1:case 4:demowrap.css("background","transparent url(/ddmenu/skins/ptn1.gif) repeat 0 0");dldwrap.css("color","#fff").css("background","rgba(255,255,255,.1)");break;default:demowrap.css("background","#FFF url(/ddmenu/skins/ptn2.gif) repeat 0 0");dldwrap.css("color","#333").css("background","#EEE")}}var submitDownload=function(b){$("#dldMsg").addClass("hide");var a=menumaker.getCurrentSkin();if(!b&&a==5){$("#dldMsg").removeClass("hide");return false}$("#htmlMilo").val($("#myHtml").val());$("#version").val(b);$("#curSkin").val(a);$("#downloadForm").trigger("submit");tooltip.hide()};function $tgl(c){var a=$("#"+c),b=a.is(":visible");a.parent().children().hide(0);if(!b)a.fadeToggle(200);else $("#cssDir").fadeToggle(200)}function toggleSearch(){var a=document.getElementById("search-block");a.className=a.className=="show"?"":"show"}